"use strict";(self.webpackChunkreact_underground=self.webpackChunkreact_underground||[]).push([[286],{2907:function(n,e,t){t.r(e),t.d(e,{default:function(){return O}});var r,i,o,a=t(5893),c=t(7294),d=t(9250),s=t(5554),l=t(6015),p=t(4083),u=t(6085),h=t(2788),x=t(8569),f=t(5005),g=t(5913),m=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},b=h.ZP.div(r||(r=m(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 100vh;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  background-color: grey;\n  padding-top: 8px;\n  & .CustomCard {\n    width: calc(50% - 4px);\n    font-size: 12px;\n    margin-bottom: 8px;\n    & .card-body {\n      padding-bottom: 4px;\n    }\n    & .card-img-top {\n      width: 100px;\n      height: 100px;\n      margin: auto;\n    }\n    & .card-title {\n      font-size: 0.75rem;\n      max-height: 27px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      cursor:pointer;\n    }\n    & .list-group-item {\n      padding: 4px 0;\n    }\n  }\n"],["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 100vh;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  background-color: grey;\n  padding-top: 8px;\n  & .CustomCard {\n    width: calc(50% - 4px);\n    font-size: 12px;\n    margin-bottom: 8px;\n    & .card-body {\n      padding-bottom: 4px;\n    }\n    & .card-img-top {\n      width: 100px;\n      height: 100px;\n      margin: auto;\n    }\n    & .card-title {\n      font-size: 0.75rem;\n      max-height: 27px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      cursor:pointer;\n    }\n    & .list-group-item {\n      padding: 4px 0;\n    }\n  }\n"]))),w=(h.ZP.div(i||(i=m(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: calc(25% - 34px);\n  height: auto;\n  margin: 12px;\n  border: 1px solid black;\n  border-radius: 8px;\n  padding: 4px;\n  background-color: white;\n  position:relative;\n  h5 {\n    margin: 0 auto;\n  }\n  img {\n    width: 100px;\n    height: 100px;\n    border-radius: 8px;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: calc(25% - 34px);\n  height: auto;\n  margin: 12px;\n  border: 1px solid black;\n  border-radius: 8px;\n  padding: 4px;\n  background-color: white;\n  position:relative;\n  h5 {\n    margin: 0 auto;\n  }\n  img {\n    width: 100px;\n    height: 100px;\n    border-radius: 8px;\n  }\n"]))),(0,h.ZP)(f.Z)(o||(o=m(["\ndisplay:inline-flex;\njustify-content:center;\nalign-items:center;\nwidth:","px;\nheight:","px;\nborder-radius:50%;\nbackground-color:",";\ncolor:white;\nfont-weight:bold;\nborder: 1px dashed ",";\nposition:absolute;\nbottom:-2px;\nright:-12px;\n&:hover{\nbackground-color:",";\n}\n"],["\ndisplay:inline-flex;\njustify-content:center;\nalign-items:center;\nwidth:","px;\nheight:","px;\nborder-radius:50%;\nbackground-color:",";\ncolor:white;\nfont-weight:bold;\nborder: 1px dashed ",";\nposition:absolute;\nbottom:-2px;\nright:-12px;\n&:hover{\nbackground-color:",";\n}\n"])),g.Lf,g.Lf+2,x.gt.purple,x.gt.gray,x.gt.purple)),j=t(381),v=t(7084),y=t(5692),Z=t(4945),k=t(6650),_=t(9548),C=t(6968),I=function(){return I=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},I.apply(this,arguments)},O=function(n){var e,t=(0,c.useRef)(null),r=(0,c.useState)(!1),i=r[0],o=r[1],h=(0,c.useState)(null),x=h[0],f=h[1],g=l.z6.actions.setStoreOffers,m=p.D.actions.addToBuy,O=(0,s.C)((function(n){return n.storesReducer})).stores,P=(0,s.T)(),S=(0,d.UO)();j.locale("ru"),(0,c.useEffect)((function(){var n=O.findIndex((function(n,e){return n.sap_code===S.storeSap}));f(n),O[n].offers||(o(!0),u.h.getItems(S.storeSap).then((function(e){P(g({data:e.data.results,storeIndex:n}))})).catch((function(n){console.log(n)})).finally((function(){o(!1)})))}),[O]);var z=function(n){(0,v.Z)(n)};return(0,c.useEffect)((function(){t&&t.current.addEventListener("scroll",z,!1)}),[t]),(0,a.jsx)(c.Suspense,I({fallback:"loading..."},{children:(0,a.jsx)(b,I({ref:t},{children:i?(0,a.jsx)(C.Z,{animation:"border",variant:"info"}):i||0!==(null===(e=O[x])||void 0===e?void 0:e.offers.length)?function(){if(O[x]&&O[x].offers)return O[x].offers.map((function(n,e){var t=n.name,r=n.img_link,i=n.promo,o=n.current_prices;return(0,a.jsxs)(y.Z,I({className:"CustomCard"},{children:[(0,a.jsx)(y.Z.Img,{variant:"top",src:r}),(0,a.jsxs)(y.Z.Body,{children:[t.length>48?(0,a.jsx)(Z.Z,I({trigger:"click",placement:"top",overlay:(0,a.jsx)(k.Z,I({id:"popover-positioned-top"},{children:(0,a.jsx)(k.Z.Body,{children:t})}))},{children:(0,a.jsx)(y.Z.Title,{children:t})}),"top".concat(e)):(0,a.jsx)(y.Z.Title,{children:t}),(0,a.jsxs)(y.Z.Text,{children:["Акция закончится ",j().to(i.date_end)]}),(0,a.jsxs)(_.Z,I({className:"list-group-flush"},{children:[(0,a.jsxs)(_.Z.Item,{children:["Цена по скидке: ",o.price_promo__min]}),(0,a.jsxs)(_.Z.Item,{children:["Цена без скидки: ",o.price_reg__min]}),(0,a.jsxs)(_.Z.Item,{children:["Экономим: "+(Number(o.price_reg__min)-Number(o.price_promo__min)).toFixed(2)+"₽",(0,a.jsx)(w,I({onClick:function(e){P(m(n))}},{children:"+"}))]})]}))]})]}),"item".concat(e))}))}():(0,a.jsx)("h4",{children:"Кажется, в этом магазине нет акционных товаров. А может магазин обновляет список товаров. Кто знает?..."})}))}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjg2LmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiaVlBTWFBLEVBQWdCLFNBQVUseTFDQTBEMUJDLEdBdkJTLFNBQVUsb3lCQXVCUCxRQUFPQyxFQUFBLEVBQVAsQ0FBYyx5WEFJckIsZUFDSyw2Q0FFWSwwREFHQSxpRkFLQSxZQVgzQixLQUNDLEtBQWEsRUFFSCxZQUdFLFVBS0YsYyxxUkNrRW5CLEVBeEhxQixTQUFDQyxHLE1BQ2RDLEdBQVksSUFBQUMsUUFBTyxNQUVuQixHQUF1QixJQUFBQyxXQUFrQixHQUF4Q0MsRUFBTyxLQUFFQyxFQUFTLEtBQ25CLEdBQThCLElBQUFGLFVBQXdCLE1BQXJERyxFQUFVLEtBQUVDLEVBQWEsS0FFeEJDLEVBQW1CLDRCQUNuQkMsRUFBYSxxQkFDYkMsR0FBVyxRQUFlLFNBQUNDLEdBQVUsT0FBQUEsRUFBTUMsYUFBTixJQUFvQixPQUMzREMsR0FBVyxTQUVYQyxHQUFTLFVBQ2ZDLEVBQU9DLE9BQU8sT0FFZCxJQUFBQyxZQUFVLFdBQ1IsSUFBSUMsRUFBdUJSLEVBQU9TLFdBQ2hDLFNBQUNDLEVBQW9CQyxHQUNuQixPQUFPRCxFQUFNRSxXQUFhUixFQUFPUyxRQUNuQyxJQUVGaEIsRUFBY1csR0FDVFIsRUFBT1EsR0FBY00sU0FDeEJuQixHQUFVLEdBQ1ZvQixFQUFBLFdBQ1lYLEVBQU9TLFVBQ2hCRyxNQUFLLFNBQUNDLEdBQ0xkLEVBQ0VMLEVBQWUsQ0FBRW9CLEtBQU1ELEVBQUlDLEtBQUtDLFFBQVN2QixXQUFZWSxJQUV6RCxJQUNDWSxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2QsSUFDQ0csU0FBUSxXQUNQN0IsR0FBVSxFQUNaLElBRU4sR0FBRyxDQUFDSyxJQUVKLElBQU15QixFQUFnQixTQUFDQyxJQUNyQixFQUFBQyxFQUFBLEdBQWFELEVBQ2YsRUFnRUEsT0ExREEsSUFBQW5CLFlBQVUsV0FDSGhCLEdBQ0xBLEVBQVVxQyxRQUFRQyxpQkFBaUIsU0FBVUosR0FBZSxFQUM5RCxHQUFHLENBQUNsQyxLQXdERixTQUFDLEVBQUF1QyxTQUFRLEdBQUNDLFNBQVUsY0FBWSxXQUNoQyxTQUFDNUMsRUFBYSxHQUFDNkMsSUFBS3pDLEdBQVMsVUFDMUJHLEdBQ0MsU0FBQ3VDLEVBQUEsRUFBTyxDQUFDQyxVQUFVLFNBQVNDLFFBQVEsU0FDL0J6QyxHQUFpRCxLQUFwQixRQUFsQixFQUFBTSxFQUFPSixVQUFXLGVBQUVrQixPQUFPc0IsUUExRDVCLFdBRW5CLEdBQUlwQyxFQUFPSixJQUFlSSxFQUFPSixHQUFZa0IsT0ErQzNDLE9BOUNNZCxFQUFPSixHQUFZa0IsT0FBT3VCLEtBQUksU0FBQ0MsRUFBWTNCLEdBQ3ZDLElBQUE0QixFQUEwQ0QsRUFBSyxLQUF6Q0UsRUFBb0NGLEVBQUssU0FBL0JHLEVBQTBCSCxFQUFLLE1BQXhCSSxFQUFtQkosRUFBSyxlQUN2RCxPQUNFLFVBQUNLLEVBQUEsRUFBSSxHQUFDQyxVQUFVLGNBQVksWUFDMUIsU0FBQ0QsRUFBQSxNQUFRLENBQUNSLFFBQVEsTUFBTVUsSUFBS0wsS0FDN0IsVUFBQ0csRUFBQSxPQUFTLFdBQ1BKLEVBQUtILE9BQVMsSUFDYixTQUFDVSxFQUFBLEVBQWMsR0FDYkMsUUFBUSxRQUVSQyxVQUFXLE1BQ1hDLFNBQ0UsU0FBQ0MsRUFBQSxFQUFPLEdBQUNDLEdBQUksMEJBQXdCLFdBQ25DLFNBQUNELEVBQUEsT0FBWSxVQUFFWCxRQUNQLFdBR1osU0FBQ0ksRUFBQSxRQUFVLFVBQUVKLE1BUlIsYUFBTTVCLEtBV2IsU0FBQ2dDLEVBQUEsUUFBVSxVQUFFSixLQUVmLFVBQUNJLEVBQUEsT0FBUywrQkFDVXRDLElBQVMrQyxHQUFHWCxFQUFNWSxjQUV0QyxVQUFDQyxFQUFBLEVBQVMsR0FBQ1YsVUFBVSxvQkFBa0IsWUFDckMsVUFBQ1UsRUFBQSxPQUFjLDhCQUNJWixFQUFlYSxxQkFFbEMsVUFBQ0QsRUFBQSxPQUFjLCtCQUNLWixFQUFlYyxtQkFFbkMsVUFBQ0YsRUFBQSxPQUFjLFdBQ1osY0FFR0csT0FBT2YsRUFBZWMsZ0JBQ3RCQyxPQUFPZixFQUFlYSxtQkFDdEJHLFFBQVEsR0FDVixLQUNGLFNBQUN0RSxFQUFTLEdBQUN1RSxRQUFTLFNBQUNqQyxHQWxEbkN2QixFQUFTSixFQWtEOEN1QyxHQUFYLEdBQWlCLDhCQXBDckIsY0FBTzNCLEdBMEM3QyxHQUdKLENBU1ksSUFESix5SUFPVixDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVhY3RfdW5kZXJncm91bmQvLi9zcmMvc3R5bGVzL0RldGFpbHNTdHlsZXMudHMiLCJ3ZWJwYWNrOi8vcmVhY3RfdW5kZXJncm91bmQvLi9zcmMvbW9kdWxlcy9TdG9yZURldGFpbHMudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzdHlsZWQgZnJvbSBcInN0eWxlZC1jb21wb25lbnRzXCI7XG5pbXBvcnQgeyBBcHBDb2xvcnMgfSBmcm9tIFwiLi9nbG9iYWxcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ3JlYWN0LWJvb3RzdHJhcCc7XG5pbXBvcnQgeyBidXJnZXJTaXplIH0gZnJvbSBcIkBtb2R1bGVzL2hlYWRlci9IZWFkZXJTdHlsZVwiO1xuXG5cbmV4cG9ydCBjb25zdCBEZXRhaWxzV3JhcGVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwdmg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgZmxleC13cmFwOiB3cmFwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBncmV5O1xuICBwYWRkaW5nLXRvcDogOHB4O1xuICAmIC5DdXN0b21DYXJkIHtcbiAgICB3aWR0aDogY2FsYyg1MCUgLSA0cHgpO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgJiAuY2FyZC1ib2R5IHtcbiAgICAgIHBhZGRpbmctYm90dG9tOiA0cHg7XG4gICAgfVxuICAgICYgLmNhcmQtaW1nLXRvcCB7XG4gICAgICB3aWR0aDogMTAwcHg7XG4gICAgICBoZWlnaHQ6IDEwMHB4O1xuICAgICAgbWFyZ2luOiBhdXRvO1xuICAgIH1cbiAgICAmIC5jYXJkLXRpdGxlIHtcbiAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgIG1heC1oZWlnaHQ6IDI3cHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgY3Vyc29yOnBvaW50ZXI7XG4gICAgfVxuICAgICYgLmxpc3QtZ3JvdXAtaXRlbSB7XG4gICAgICBwYWRkaW5nOiA0cHggMDtcbiAgICB9XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBEZXRhaWwgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgd2lkdGg6IGNhbGMoMjUlIC0gMzRweCk7XG4gIGhlaWdodDogYXV0bztcbiAgbWFyZ2luOiAxMnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBwYWRkaW5nOiA0cHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBwb3NpdGlvbjpyZWxhdGl2ZTtcbiAgaDUge1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICB9XG4gIGltZyB7XG4gICAgd2lkdGg6IDEwMHB4O1xuICAgIGhlaWdodDogMTAwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgQWRkQnV0dG9uID0gc3R5bGVkKEJ1dHRvbilgXG5kaXNwbGF5OmlubGluZS1mbGV4O1xuanVzdGlmeS1jb250ZW50OmNlbnRlcjtcbmFsaWduLWl0ZW1zOmNlbnRlcjtcbndpZHRoOiR7YnVyZ2VyU2l6ZX1weDtcbmhlaWdodDoke2J1cmdlclNpemUgKyAyfXB4O1xuYm9yZGVyLXJhZGl1czo1MCU7XG5iYWNrZ3JvdW5kLWNvbG9yOiR7QXBwQ29sb3JzLnB1cnBsZX07XG5jb2xvcjp3aGl0ZTtcbmZvbnQtd2VpZ2h0OmJvbGQ7XG5ib3JkZXI6IDFweCBkYXNoZWQgJHtBcHBDb2xvcnMuZ3JheX07XG5wb3NpdGlvbjphYnNvbHV0ZTtcbmJvdHRvbTotMnB4O1xucmlnaHQ6LTEycHg7XG4mOmhvdmVye1xuYmFja2dyb3VuZC1jb2xvcjoke0FwcENvbG9ycy5wdXJwbGV9O1xufVxuYFxuIiwiaW1wb3J0IFJlYWN0LHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlUmVmLCBTdXNwZW5zZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlUGFyYW1zIH0gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcbmltcG9ydCB7IHVzZUFwcFNlbGVjdG9yLCB1c2VBcHBEaXNwYXRjaCB9IGZyb20gXCIuLi9ob29rc1wiO1xuaW1wb3J0IHsgc3RvcmVzU2xpY2UgfSBmcm9tIFwiLi4vc3RvcmUvcmVkdWNlcnMvU3RvcmVzU2xpY2VcIjtcbmltcG9ydCB7IHRvQnV5U2xpY2UgfSBmcm9tIFwiLi4vc3RvcmUvcmVkdWNlcnMvVG9CdXlTbGljZVwiO1xuaW1wb3J0IHsgSVN0b3Jlc0xpc3QgfSBmcm9tIFwiLi9jb250ZW50L1N0b3Jlc0xpc3QvU3RvcmVzTGlzdFwiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIkBBUElcIjtcbmltcG9ydCB7IEFkZEJ1dHRvbiwgRGV0YWlsc1dyYXBlciB9IGZyb20gXCJAc3R5bGVzL0RldGFpbHNTdHlsZXNcIjtcbmltcG9ydCAqIGFzIG1vbWVudCBmcm9tIFwibW9tZW50XCI7XG5pbXBvcnQgc2Nyb2xsSGVscGVyIGZyb20gXCIuL3Njcm9sbEhlbHBlclwiO1xuaW1wb3J0IHtcbiAgQ2FyZCxcbiAgQnV0dG9uLFxuICBMaXN0R3JvdXAsXG4gIE92ZXJsYXlUcmlnZ2VyLFxuICBQb3BvdmVyLFxuICBTcGlubmVyLFxufSBmcm9tIFwicmVhY3QtYm9vdHN0cmFwXCI7XG5pbXBvcnQgeyBjYWxsVG9hc3RlciB9IGZyb20gJy4uL2hvb2tzL3VzZVRvYXN0ZXInO1xuaW1wb3J0IHsgQXBwQ29sb3JzIH0gZnJvbSAnLi4vc3R5bGVzL2dsb2JhbCc7XG5cbnR5cGUgb2ZmZXJzVHlwZSA9IHtcbiAgb2ZmZXJzOiBhbnk7XG59O1xuXG5jb25zdCBTdG9yZURldGFpbHMgPSAocHJvcHM6IGFueSkgPT4ge1xuICBjb25zdCBJdGVtc0xpc3QgPSB1c2VSZWYobnVsbCk7XG5cbiAgY29uc3QgW2xvYWRpbmcsIGlzTG9hZGluZ10gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtzdG9yZUluZGV4LCBzZXRTdG9yZUluZGV4XSA9IHVzZVN0YXRlPG51bWJlciB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IHsgc2V0U3RvcmVPZmZlcnMgfSA9IHN0b3Jlc1NsaWNlLmFjdGlvbnM7XG4gIGNvbnN0IHsgYWRkVG9CdXkgfSA9IHRvQnV5U2xpY2UuYWN0aW9ucztcbiAgY29uc3QgeyBzdG9yZXMgfSA9IHVzZUFwcFNlbGVjdG9yKChzdGF0ZSkgPT4gc3RhdGUuc3RvcmVzUmVkdWNlcik7XG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlQXBwRGlzcGF0Y2goKTtcblxuICBjb25zdCBwYXJhbXMgPSB1c2VQYXJhbXMoKTtcbiAgbW9tZW50LmxvY2FsZShcInJ1XCIpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRTdG9yZTogbnVtYmVyID0gc3RvcmVzLmZpbmRJbmRleChcbiAgICAgIChzdG9yZTogSVN0b3Jlc0xpc3QsIGk6IG51bWJlcik6IGJvb2xlYW4gPT4ge1xuICAgICAgICByZXR1cm4gc3RvcmUuc2FwX2NvZGUgPT09IHBhcmFtcy5zdG9yZVNhcDtcbiAgICAgIH1cbiAgICApO1xuICAgIHNldFN0b3JlSW5kZXgoY3VycmVudFN0b3JlKTtcbiAgICBpZiAoIXN0b3Jlc1tjdXJyZW50U3RvcmVdLm9mZmVycykge1xuICAgICAgaXNMb2FkaW5nKHRydWUpO1xuICAgICAgYXBpXG4gICAgICAgIC5nZXRJdGVtcyhwYXJhbXMuc3RvcmVTYXApXG4gICAgICAgIC50aGVuKChyZXM6IGFueSkgPT4ge1xuICAgICAgICAgIGRpc3BhdGNoKFxuICAgICAgICAgICAgc2V0U3RvcmVPZmZlcnMoeyBkYXRhOiByZXMuZGF0YS5yZXN1bHRzLCBzdG9yZUluZGV4OiBjdXJyZW50U3RvcmUgfSlcbiAgICAgICAgICApO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgaXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbc3RvcmVzXSk7XG5cbiAgY29uc3Qgc2Nyb2xsSGFuZGxlciA9IChlOiBhbnkpOiB2b2lkID0+IHtcbiAgICBzY3JvbGxIZWxwZXIoZSk7XG4gIH07XG5cbiAgY29uc3QgYWRkSGFuZGxlciA9IChpdGVtOiB7fSk6IHZvaWQgPT4ge1xuICAgIGRpc3BhdGNoKGFkZFRvQnV5KGl0ZW0pKVxuICB9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIUl0ZW1zTGlzdCkgcmV0dXJuO1xuICAgIEl0ZW1zTGlzdC5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgc2Nyb2xsSGFuZGxlciwgZmFsc2UpO1xuICB9LCBbSXRlbXNMaXN0XSk7XG5cbiAgY29uc3QgcmVuZGVyT2ZmZXJzID0gKCk6IGFueSA9PiB7XG4gICAgbGV0IGFyciA9IFtdO1xuICAgIGlmIChzdG9yZXNbc3RvcmVJbmRleF0gJiYgc3RvcmVzW3N0b3JlSW5kZXhdLm9mZmVycykge1xuICAgICAgYXJyID0gc3RvcmVzW3N0b3JlSW5kZXhdLm9mZmVycy5tYXAoKG9mZmVyOiBhbnksIGk6IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCB7IG5hbWUsIGltZ19saW5rLCBwcm9tbywgY3VycmVudF9wcmljZXMgfSA9IG9mZmVyO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxDYXJkIGNsYXNzTmFtZT1cIkN1c3RvbUNhcmRcIiBrZXk9e2BpdGVtJHtpfWB9PlxuICAgICAgICAgICAgPENhcmQuSW1nIHZhcmlhbnQ9XCJ0b3BcIiBzcmM9e2ltZ19saW5rfSAvPlxuICAgICAgICAgICAgPENhcmQuQm9keT5cbiAgICAgICAgICAgICAge25hbWUubGVuZ3RoID4gNDggPyAoXG4gICAgICAgICAgICAgICAgPE92ZXJsYXlUcmlnZ2VyXG4gICAgICAgICAgICAgICAgICB0cmlnZ2VyPVwiY2xpY2tcIlxuICAgICAgICAgICAgICAgICAga2V5PXtgdG9wJHtpfWB9XG4gICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9e1widG9wXCJ9XG4gICAgICAgICAgICAgICAgICBvdmVybGF5PXtcbiAgICAgICAgICAgICAgICAgICAgPFBvcG92ZXIgaWQ9e1wicG9wb3Zlci1wb3NpdGlvbmVkLXRvcFwifT5cbiAgICAgICAgICAgICAgICAgICAgICA8UG9wb3Zlci5Cb2R5PntuYW1lfTwvUG9wb3Zlci5Cb2R5PlxuICAgICAgICAgICAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPENhcmQuVGl0bGU+e25hbWV9PC9DYXJkLlRpdGxlPlxuICAgICAgICAgICAgICAgIDwvT3ZlcmxheVRyaWdnZXI+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPENhcmQuVGl0bGU+e25hbWV9PC9DYXJkLlRpdGxlPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8Q2FyZC5UZXh0PlxuICAgICAgICAgICAgICAgINCQ0LrRhtC40Y8g0LfQsNC60L7QvdGH0LjRgtGB0Y8ge21vbWVudCgpLnRvKHByb21vLmRhdGVfZW5kKX1cbiAgICAgICAgICAgICAgPC9DYXJkLlRleHQ+XG4gICAgICAgICAgICAgIDxMaXN0R3JvdXAgY2xhc3NOYW1lPVwibGlzdC1ncm91cC1mbHVzaFwiPlxuICAgICAgICAgICAgICAgIDxMaXN0R3JvdXAuSXRlbT5cbiAgICAgICAgICAgICAgICAgINCm0LXQvdCwINC/0L4g0YHQutC40LTQutC1OiB7Y3VycmVudF9wcmljZXMucHJpY2VfcHJvbW9fX21pbn1cbiAgICAgICAgICAgICAgICA8L0xpc3RHcm91cC5JdGVtPlxuICAgICAgICAgICAgICAgIDxMaXN0R3JvdXAuSXRlbT5cbiAgICAgICAgICAgICAgICAgINCm0LXQvdCwINCx0LXQtyDRgdC60LjQtNC60Lg6IHtjdXJyZW50X3ByaWNlcy5wcmljZV9yZWdfX21pbn1cbiAgICAgICAgICAgICAgICA8L0xpc3RHcm91cC5JdGVtPlxuICAgICAgICAgICAgICAgIDxMaXN0R3JvdXAuSXRlbT5cbiAgICAgICAgICAgICAgICAgIHtcItCt0LrQvtC90L7QvNC40Lw6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgIE51bWJlcihjdXJyZW50X3ByaWNlcy5wcmljZV9yZWdfX21pbikgLVxuICAgICAgICAgICAgICAgICAgICAgIE51bWJlcihjdXJyZW50X3ByaWNlcy5wcmljZV9wcm9tb19fbWluKVxuICAgICAgICAgICAgICAgICAgICApLnRvRml4ZWQoMikgK1xuICAgICAgICAgICAgICAgICAgICBcIuKCvVwifVxuICAgICAgICAgICAgICAgICAgPEFkZEJ1dHRvbiBvbkNsaWNrPXsoZTogYW55KT0+YWRkSGFuZGxlcihvZmZlcil9Pis8L0FkZEJ1dHRvbj5cbiAgICAgICAgICAgICAgICA8L0xpc3RHcm91cC5JdGVtPlxuICAgICAgICAgICAgICA8L0xpc3RHcm91cD5cbiAgICAgICAgICAgIDwvQ2FyZC5Cb2R5PlxuICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8U3VzcGVuc2UgZmFsbGJhY2s9e1wibG9hZGluZy4uLlwifT5cbiAgICA8RGV0YWlsc1dyYXBlciByZWY9e0l0ZW1zTGlzdH0+XG4gICAgICB7bG9hZGluZyA/IChcbiAgICAgICAgPFNwaW5uZXIgYW5pbWF0aW9uPVwiYm9yZGVyXCIgdmFyaWFudD1cImluZm9cIiAvPlxuICAgICAgICApIDogIWxvYWRpbmcgJiYgc3RvcmVzW3N0b3JlSW5kZXhdPy5vZmZlcnMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDxoND7QmtCw0LbQtdGC0YHRjywg0LIg0Y3RgtC+0Lwg0LzQsNCz0LDQt9C40L3QtSDQvdC10YIg0LDQutGG0LjQvtC90L3Ri9GFINGC0L7QstCw0YDQvtCyLiDQkCDQvNC+0LbQtdGCINC80LDQs9Cw0LfQuNC9INC+0LHQvdC+0LLQu9GP0LXRgiDRgdC/0LjRgdC+0Log0YLQvtCy0LDRgNC+0LIuINCa0YLQviDQt9C90LDQtdGCPy4uLjwvaDQ+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIHJlbmRlck9mZmVycygpXG4gICAgICAgICAgICApfVxuICAgIDwvRGV0YWlsc1dyYXBlcj5cbiAgICA8L1N1c3BlbnNlPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU3RvcmVEZXRhaWxzO1xuIl0sIm5hbWVzIjpbIkRldGFpbHNXcmFwZXIiLCJBZGRCdXR0b24iLCJCdXR0b24iLCJwcm9wcyIsIkl0ZW1zTGlzdCIsInVzZVJlZiIsInVzZVN0YXRlIiwibG9hZGluZyIsImlzTG9hZGluZyIsInN0b3JlSW5kZXgiLCJzZXRTdG9yZUluZGV4Iiwic2V0U3RvcmVPZmZlcnMiLCJhZGRUb0J1eSIsInN0b3JlcyIsInN0YXRlIiwic3RvcmVzUmVkdWNlciIsImRpc3BhdGNoIiwicGFyYW1zIiwibW9tZW50IiwibG9jYWxlIiwidXNlRWZmZWN0IiwiY3VycmVudFN0b3JlIiwiZmluZEluZGV4Iiwic3RvcmUiLCJpIiwic2FwX2NvZGUiLCJzdG9yZVNhcCIsIm9mZmVycyIsImFwaSIsInRoZW4iLCJyZXMiLCJkYXRhIiwicmVzdWx0cyIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsInNjcm9sbEhhbmRsZXIiLCJlIiwic2Nyb2xsSGVscGVyIiwiY3VycmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJTdXNwZW5zZSIsImZhbGxiYWNrIiwicmVmIiwiU3Bpbm5lciIsImFuaW1hdGlvbiIsInZhcmlhbnQiLCJsZW5ndGgiLCJtYXAiLCJvZmZlciIsIm5hbWUiLCJpbWdfbGluayIsInByb21vIiwiY3VycmVudF9wcmljZXMiLCJDYXJkIiwiY2xhc3NOYW1lIiwic3JjIiwiT3ZlcmxheVRyaWdnZXIiLCJ0cmlnZ2VyIiwicGxhY2VtZW50Iiwib3ZlcmxheSIsIlBvcG92ZXIiLCJpZCIsInRvIiwiZGF0ZV9lbmQiLCJMaXN0R3JvdXAiLCJwcmljZV9wcm9tb19fbWluIiwicHJpY2VfcmVnX19taW4iLCJOdW1iZXIiLCJ0b0ZpeGVkIiwib25DbGljayJdLCJzb3VyY2VSb290IjoiIn0=